<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ObjectAL: ObjectAL for iPhone</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ObjectAL for iPhone</h1><p>Version 2.0 <br/>
 <br/>
 Copyright 2009-2010 Karl Stenerud <br/>
<br/>
</p>
<p>Released under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License v2.0</a></p>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="contents_sec">
Contents</a></h2>
<ul>
<li><a class="el" href="index.html#intro_sec">Introduction</a></li>
<li><a class="el" href="index.html#objectal_and_openal_sec">ObjectAL and OpenAL</a></li>
<li><a class="el" href="index.html#audio_formats_sec">Audio Formats</a></li>
<li><a class="el" href="index.html#add_objectal_sec">Adding ObjectAL to your project</a> (also, installing the documentation into XCode)</li>
<li><a class="el" href="index.html#configuration_sec">Compile-Time Configuration</a></li>
<li><a class="el" href="index.html#use_iossimpleaudio_sec">Using OALSimpleAudio</a></li>
<li><a class="el" href="index.html#use_objectal_sec">Using the OpenAL Objects and OALAudioTrack</a></li>
<li><a class="el" href="index.html#other_examples_sec">Other Examples</a></li>
<li><a class="el" href="index.html#simulator_issues_sec">Simulator Issues</a></li>
</ul>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="intro_sec">
Introduction</a></h2>
 
 <strong>ObjectAL for iPhone</strong> is designed to be a simpler, more intuitive interface to
 OpenAL and AVAudioPlayer.
 There are four main parts to <strong>ObjectAL for iPhone</strong>:<br/><br/>
 <div align="center">
<img src="ObjectAL-Overview1.png" alt="ObjectAL-Overview1.png"/>
</div>
<ul>
<li><a href="index.html#objectal_and_openal_sec" class="el">ObjectAL</a> gives you full access to the OpenAL system without the hassle of the C API. All OpenAL operations can be performed using first class objects and properties, without needing to muddle around with arrays of data, maintain IDs, or pass around pointers to basic types.</li>
</ul>
<ul>
<li><a class="el" href="interface_o_a_l_audio_track.html" title="Plays an audio track via AVAudioPlayer.">OALAudioTrack</a> provides a simpler interface to AVAudioPlayer, allowing you to play, stop, pause, fade, and mute background music tracks.</li>
</ul>
<ul>
<li><a class="el" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> provides support functionality for audio in iOS devices, including automatic interrupt handling and audio data loading routines. <br/>
 As well, it provides an easy way to configure how the audio session will handle iPod-style music playing and the silent switch.</li>
</ul>
<ul>
<li><a class="el" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> layers on top of the other three, providing an even simpler interface for playing background music and sound effects.</li>
</ul>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="objectal_and_openal_sec">
ObjectAL and OpenAL</a></h2>
<p><b>ObjectAL</b> follows the same basic principles as the <a href="http://connect.creativelabs.com/openal">OpenAL API (http://connect.creativelabs.com/openal) </a>.</p>
<div align="center">
<img src="ObjectAL-Overview2.png" alt="ObjectAL-Overview2.png"/>
</div>
<ul>
<li><a class="el" href="interface_open_a_l_manager.html" title="Manager class for OpenAL objects (ObjectAL).">OpenALManager</a> provides some overall controls that affect everything, and manages the current context.</li>
</ul>
<ul>
<li><a class="el" href="interface_a_l_device.html" title="A device is a logical mapping to an audio device through the OpenAL implementation...">ALDevice</a> represents a physical audio device. <br/>
 Each device can have one or more contexts (<a class="el" href="interface_a_l_context.html" title="A context encompasses a single listener and a series of sources.">ALContext</a>) created on it, and can have multiple buffers (<a class="el" href="interface_a_l_buffer.html" title="A buffer for audio data that will be played via a SoundSource.">ALBuffer</a>) associated with it.</li>
</ul>
<ul>
<li><a class="el" href="interface_a_l_context.html" title="A context encompasses a single listener and a series of sources.">ALContext</a> controls the overall sound environment, such as distance model, doppler effect, and speed of sound. <br/>
 Each context has one listener (<a class="el" href="interface_a_l_listener.html" title="The listener represents the user who is listening to sounds in 3D space.">ALListener</a>), and can have multiple sources (<a class="el" href="interface_a_l_source.html" title="A source represents an object that emits sound which can be heard by a listener.">ALSource</a>) opened on it (up to a maximum of 32 overall on iPhone).</li>
</ul>
<ul>
<li><a class="el" href="interface_a_l_listener.html" title="The listener represents the user who is listening to sounds in 3D space.">ALListener</a> represents the listener of sounds originating on its context (one listener per context). It has position, orientation, and velocity.</li>
</ul>
<ul>
<li><a class="el" href="interface_a_l_source.html" title="A source represents an object that emits sound which can be heard by a listener.">ALSource</a> is a sound emitting source that plays sound data from an <a class="el" href="interface_a_l_buffer.html" title="A buffer for audio data that will be played via a SoundSource.">ALBuffer</a>. It has position, direction, velocity, as well as other properties which determine how the sound is emitted.</li>
</ul>
<ul>
<li><a class="el" href="interface_a_l_channel_source.html" title="A Sound source composed of other sources.">ALChannelSource</a> allows you to reserve a certain number of sources for special purposes.</li>
</ul>
<ul>
<li><a class="el" href="interface_a_l_buffer.html" title="A buffer for audio data that will be played via a SoundSource.">ALBuffer</a> is simply a container for sound data. Only linear PCM is supported directly, but <a class="el" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> load methods, and <a class="el" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> effect preload and play methods, will automatically convert any formats that don't require hardware decoding (though conversion results in a longer loading time).</li>
</ul>
<p>Further information regarding the more advanced features of OpenAL (such as distance models) are available via the <a href="http://connect.creativelabs.com/openal/Documentation/Forms/AllItems.aspx">OpenAL Documentation at Creative Labs</a>. <br/>
 In particular, read up on the various property values for sources and listeners (such as Doppler Shift) in the <b>OpenAL Programmer's Guide</b>, and distance models in section 3 of the <b>OpenAL Specification</b>. <br/>
 Also be sure to read the <a href="http://developer.apple.com/library/ios/#technotes/tn2008/tn2199.html">OpenAL FAQ from Apple</a>.</p>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="audio_formats_sec">
Audio Formats</a></h2>
<p>According to the <a href="http://developer.apple.com/library/ios/#technotes/tn2008/tn2199.html">OpenAL FAQ from Apple</a>:</p>
<ul>
<li>To use OpenAL for playback, your application typically reads audio data from disk using Extended Audio File Services. In this process you convert the on-disk format, as needed, into one of the OpenAL playback formats (<a class="el" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> and <a class="el" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> do this for you).</li>
</ul>
<ul>
<li>The on-disk audio format that your application reads must be PCM (uncompressed) or a compressed format that does not use hardware decompression, such as IMA-4.</li>
</ul>
<ul>
<li>The supported playback formats for OpenAL in iPhone OS are identical to those for OpenAL in Mac OS X. You can play the following linear PCM variants: mono 8-bit, mono 16-bit, stereo 8-bit, and stereo 16-bit.</li>
</ul>
<p>AudioTrack supports all hardware and software decoded formats as <a href="http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html">specified by Apple here</a>.</p>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="add_objectal_sec">
Adding ObjectAL to your project</a></h2>
 
 To add ObjectAL to your project, do the following:

 <ol>
	<li>Copy libs/ObjectAL from this project into your project.  You can simply drag it into the
		"Groups & Files" section in xcode if you like (be sure to select "Copy items into
		destination group's folder"). <br/>
		Alternatively, you can build ObjectAL as a static library (as it's configured to do in the
		ObjectAL demo project).<br/><br/>
	</li>

	<li>Add the following frameworks to your project:
		<ul>
			<li>OpenAL.framework</li>
			<li>AudioToolbox.framework</li>
			<li>AVFoundation.framework</li>
		</ul><br/>
	</li>
 
	<li>Start using ObjectAL!<br/></br/></li>
 </ol>
 <br/>
 <strong>Note:</strong> The demos in this project use
 <a href="http://www.cocos2d-iphone.org">Cocos2d</a>, a very nice 2d game engine.  However,
 ObjectAL doesn't require it.  You can just as easily use ObjectAL in your Cocoa app or anything
 you wish.
 <br/> <br/>
 <strong>Note #2:</strong> You do NOT have to provide a link to the Apache license from within your
 application. Simply including a copy of the license in your project is sufficient.
 <p><br/>
 </p>
<h3><a class="anchor" id="install_dox">
Installing the ObjectAL Documentation into XCode</a></h3>
 
 You can install the ObjectAL documentation into XCode's Developer Documentation system by doing
 the following: 
 <ol type="1">
<li>Install <a href="http://www.doxygen.org">Doxygen</a></li>
<li>Ensure that the "DOXYGEN_PATH" user-defined setting in Documentation's build configuration matches where Doxygen is installed on your system.</li>
<li>Build the "Doxumentation" target in this project.</li>
<li>Open the developer documentation and type "ObjectAL" into the search box.</li>
</ol>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="configuration_sec">
Compile-Time Configuration</a></h2>
<p><b><a class="el" href="_object_a_l_config_8h_source.html">ObjectALConfig.h</a></b> contains configuration defines that will affect at a high level how ObjectAL behaves. Look inside <b><a class="el" href="_object_a_l_config_8h_source.html">ObjectALConfig.h</a></b> to see what can be configured, and what each configuration value does. <br/>
 The recommended values are fine for most users, but Cocos2D users may want to set OBJECTAL_USE_COCOS2D_ACTIONS so that the audio actions (such as fade) use the Cocos2D action manager.</p>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="use_iossimpleaudio_sec">
Using OALSimpleAudio</a></h2>
<p>By far, the easiest component to use is <a class="el" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a>. You sacrifice some power for ease-of-use, but for many projects it is more than sufficient.</p>
<p>Here is a code example:</p>
<div class="fragment"><pre class="fragment"><span class="comment">// OALSimpleAudioSample.h</span>

<span class="keyword">@interface </span>OALSimpleAudioSample : NSObject
{
    <span class="comment">// No objects to keep track of...</span>
}

<span class="keyword">@end</span>


<span class="comment">// OALSimpleAudioSample.m</span>

<span class="preprocessor">#import &quot;OALSimpleAudioSample.h&quot;</span>
<span class="preprocessor">#import &quot;ObjectAL.h&quot;</span>

<span class="preprocessor">#define SHOOT_SOUND </span><span class="stringliteral">@&quot;shoot.caf&quot;</span>
<span class="preprocessor">#define EXPLODE_SOUND </span><span class="stringliteral">@&quot;explode.caf&quot;</span>

<span class="preprocessor">#define INGAME_MUSIC_FILE </span><span class="stringliteral">@&quot;bg_music.mp3&quot;</span>
<span class="preprocessor">#define GAMEOVER_MUSIC_FILE </span><span class="stringliteral">@&quot;gameover_music.mp3&quot;</span>

<span class="keyword">@implementation </span>OALSimpleAudioSample

- (id) init
{
    <span class="keywordflow">if</span>(nil != (<span class="keyword">self</span> = [super init]))
    {
        <span class="comment">// We don&apos;t want ipod music to keep playing since</span>
        <span class="comment">// we have our own bg music.</span>
        [<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance].allowIpod = NO;
        
        <span class="comment">// Mute all audio if the silent switch is turned on.</span>
        [<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance].honorSilentSwitch = YES;
        
        <span class="comment">// This loads the sound effects into memory so that</span>
        <span class="comment">// there&apos;s no delay when we tell it to play them.</span>
        [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] preloadEffect:SHOOT_SOUND];
        [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] preloadEffect:EXPLODE_SOUND];
    }
    <span class="keywordflow">return</span> <span class="keyword">self</span>;
}

- (void) onGameStart
{
    <span class="comment">// Play the BG music and loop it.</span>
    [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] playBg:INGAME_MUSIC_FILE loop:YES];
}

- (void) onGamePause
{
    [<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance].paused = YES;
}

- (void) onGameResume
{
    [<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance].paused = NO;
}

- (void) onGameOver
{
    <span class="comment">// Could use stopEverything here if you want</span>
    [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] stopAllEffects];
    
    <span class="comment">// We only play the game over music through once.</span>
    [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] playBg:GAMEOVER_MUSIC_FILE];
}

- (void) onShipShotABullet
{
    [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] playEffect:SHOOT_SOUND];
}

- (void) onShipGotHit
{
    [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] playEffect:EXPLODE_SOUND];
}

- (void) onQuitToMainMenu
{
    <span class="comment">// Stop all music and sound effects.</span>
    [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] stopEverything];   
    
    <span class="comment">// Unload all sound effects and bg music so that it doesn&apos;t fill</span>
    <span class="comment">// memory unnecessarily.</span>
    [[<a class="code" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> sharedInstance] unloadAllEffects];
}

<span class="keyword">@end</span>
</pre></div><p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="use_objectal_sec">
Using the OpenAL Objects and OALAudioTrack</a></h2>
<p>The OpenAL objects and <a class="el" href="interface_o_a_l_audio_track.html" title="Plays an audio track via AVAudioPlayer.">OALAudioTrack</a> offer you much more power at the cost of complexity. Here's the same thing as above, done using ObjectAL and <a class="el" href="interface_o_a_l_audio_track.html" title="Plays an audio track via AVAudioPlayer.">OALAudioTrack</a> directly:</p>
<div class="fragment"><pre class="fragment"><span class="comment">// OpenALAudioTrackSample.h</span>

<span class="preprocessor">#import &quot;ObjectAL.h&quot;</span>

<span class="keyword">@interface </span>OpenALAudioTrackSample : NSObject
{
    <span class="comment">// Sound Effects</span>
    <a class="code" href="interface_a_l_device.html" title="A device is a logical mapping to an audio device through the OpenAL implementation...">ALDevice</a>* device;
    <a class="code" href="interface_a_l_context.html" title="A context encompasses a single listener and a series of sources.">ALContext</a>* context;
    <a class="code" href="interface_a_l_channel_source.html" title="A Sound source composed of other sources.">ALChannelSource</a>* channel;
    <a class="code" href="interface_a_l_buffer.html" title="A buffer for audio data that will be played via a SoundSource.">ALBuffer</a>* shootBuffer;  
    <a class="code" href="interface_a_l_buffer.html" title="A buffer for audio data that will be played via a SoundSource.">ALBuffer</a>* explosionBuffer;
    
    <span class="comment">// Background Music</span>
    <a class="code" href="interface_o_a_l_audio_track.html" title="Plays an audio track via AVAudioPlayer.">OALAudioTrack</a>* musicTrack;
}

<span class="keyword">@end</span>


<span class="comment">// OpenALAudioTrackSample.m</span>

<span class="preprocessor">#import &quot;OpenALAudioTrackSample.h&quot;</span>

<span class="preprocessor">#define SHOOT_SOUND </span><span class="stringliteral">@&quot;shoot.caf&quot;</span>
<span class="preprocessor">#define EXPLODE_SOUND </span><span class="stringliteral">@&quot;explode.caf&quot;</span>

<span class="preprocessor">#define INGAME_MUSIC_FILE </span><span class="stringliteral">@&quot;bg_music.mp3&quot;</span>
<span class="preprocessor">#define GAMEOVER_MUSIC_FILE </span><span class="stringliteral">@&quot;gameover_music.mp3&quot;</span>

<span class="keyword">@implementation </span>OpenALAudioTrackSample

- (id) init
{
    <span class="keywordflow">if</span>(nil != (<span class="keyword">self</span> = [super init]))
    {
        <span class="comment">// Create the device and context.</span>
        device = [[<a class="code" href="interface_a_l_device.html" title="A device is a logical mapping to an audio device through the OpenAL implementation...">ALDevice</a> <a class="code" href="interface_a_l_device.html#a6e77c8abc083a0c854ace2f7040d9c0e" title="Open the specified device.">deviceWithDeviceSpecifier</a>:nil] retain];
        context = [[<a class="code" href="interface_a_l_context.html" title="A context encompasses a single listener and a series of sources.">ALContext</a> <a class="code" href="interface_a_l_context.html#a68f550df86452de025e3a79154c5dcb3" title="Create a new context on the specified device.">contextOnDevice</a>:device <a class="code" href="interface_a_l_context.html#a68f550df86452de025e3a79154c5dcb3" title="Create a new context on the specified device.">attributes</a>:nil] retain];
        [<a class="code" href="interface_open_a_l_manager.html" title="Manager class for OpenAL objects (ObjectAL).">OpenALManager</a> sharedInstance].currentContext = context;
        
        <span class="comment">// Deal with interruptions for me!</span>
        [<a class="code" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> sharedInstance].handleInterruptions = YES;
        
        <span class="comment">// We don&apos;t want ipod music to keep playing since</span>
        <span class="comment">// we have our own bg music.</span>
        [<a class="code" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> sharedInstance].allowIpod = NO;
        
        <span class="comment">// Mute all audio if the silent switch is turned on.</span>
        [<a class="code" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> sharedInstance].honorSilentSwitch = YES;
        
        <span class="comment">// Take all 32 sources for this channel.</span>
        <span class="comment">// (we probably won&apos;t use that many but what the heck!)</span>
        channel = [[<a class="code" href="interface_a_l_channel_source.html" title="A Sound source composed of other sources.">ALChannelSource</a> <a class="code" href="interface_a_l_channel_source.html#a96e54b79747e136015fbba5b935e5fec" title="Create a channel with a number of sources.">channelWithSources</a>:32] retain];
        
        <span class="comment">// Preload the buffers so we don&apos;t have to load and play them later.</span>
        shootBuffer = [[[<a class="code" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> sharedInstance]
                        bufferFromFile:SHOOT_SOUND] retain];
        explosionBuffer = [[[<a class="code" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> sharedInstance]
                            bufferFromFile:EXPLODE_SOUND] retain];
        
        <span class="comment">// Background music track.</span>
        musicTrack = [[<a class="code" href="interface_o_a_l_audio_track.html" title="Plays an audio track via AVAudioPlayer.">OALAudioTrack</a> <a class="code" href="interface_o_a_l_audio_track.html#a87c4ba40b57bc875d31917ae34af1d5f" title="Create a new audio track.">track</a>] retain];
    }
    <span class="keywordflow">return</span> <span class="keyword">self</span>;
}

- (void) dealloc
{
    [musicTrack release];
    
    [channel release];
    [shootBuffer release];
    [explosionBuffer release];
    
    <span class="comment">// Note: You&apos;ll likely only have one device and context open throughout</span>
    <span class="comment">// your program, so in a real program you&apos;d be better off making a</span>
    <span class="comment">// singleton object that manages the device and context, rather than</span>
    <span class="comment">// allocating/deallocating it here.</span>
    <span class="comment">// Most of the demos just let OALSimpleAudio manage the device and context</span>
    <span class="comment">// for them.</span>
    [context release];
    [device release];
    
    [<span class="keyword">super</span> dealloc];
}

- (void) onGameStart
{
    <span class="comment">// Play the BG music and loop it forever.</span>
    [musicTrack playFile:INGAME_MUSIC_FILE loops:-1];
}

- (void) onGamePause
{
    musicTrack.paused = YES;
    channel.paused = YES;
}

- (void) onGameResume
{
    channel.paused = NO;
    musicTrack.paused = NO;
}

- (void) onGameOver
{
    [channel stop];
    [musicTrack stop];
    
    <span class="comment">// We only play the game over music through once.</span>
    [musicTrack playFile:GAMEOVER_MUSIC_FILE];
}

- (void) onShipShotABullet
{
    [channel play:shootBuffer];
}

- (void) onShipGotHit
{
    [channel play:explosionBuffer];
}

- (void) onQuitToMainMenu
{
    <span class="comment">// Stop all music and sound effects.</span>
    [channel stop];
    [musicTrack stop];
}

<span class="keyword">@end</span>
</pre></div><p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="other_examples_sec">
Other Examples</a></h2>
<p>The demo scenes in this distribution have been crafted to demonstrate common uses of this library. Try them out and go through the code to see how it's done. I've done my best to keep the code readable. Really!</p>
<p>The current demos are:</p>
<ul>
<li><b>SingleSourceDemo</b>: Demonstrates using a location based source and a listener.</li>
<li><b>TwoSourceDemo</b>: Demonstrates using two location based sources and a listener.</li>
<li><b>VolumePitchPanDemo</b>: Demonstrates using gain, pitch, and pan controls.</li>
<li><b>CrossFadeDemo</b>: Demonstrates crossfading between two sources.</li>
<li><b>ChannelsDemo</b>: Demonstrates using audio channels.</li>
<li><b>FadeDemo</b>: Demonstrates realtime fading with AudioTrack and <a class="el" href="interface_a_l_source.html" title="A source represents an object that emits sound which can be heard by a listener.">ALSource</a>.</li>
<li><b>AudioTrackDemo</b>: Demonstrates using multiple AudioTrack objects.</li>
<li><b>HardwareDemo</b>: Demonstrates hardware monitoring features.</li>
<li><b>PlanetKillerDemo</b>: Demonstrates using <a class="el" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> in a game setting.</li>
</ul>
<p><br/>
 <br/>
 </p>
<h2><a class="anchor" id="simulator_issues_sec">
Simulator Issues</a></h2>
<p>As you've likely heard time and time again, the simulator is no substitute for the real thing. The simulator is buggy. It can run faster or slower than a real device. It fails system calls that a real device doesn't. It shows graphics glitches that a real device doesn't. Sounds stop working. Dogs and cats living together, etc, etc. When things look wrong, try it on a real device before bugging people.</p>
<p><br/>
 </p>
<h3><a class="anchor" id="simulator_limitations">
Simulator Limitations</a></h3>
<p>The simulator does not support setting audio modes, so setting allowIpod or honorSilentSwitch in <a class="el" href="interface_o_a_l_audio_support.html" title="Provides iOS-specific audio support, including audio file loading, session management...">OALAudioSupport</a> will have no effect in the simulator.</p>
<p><br/>
 </p>
<h3><a class="anchor" id="simulator_errors">
Error Codes on the Simulator</a></h3>
<p>From time to time, the simulator can get confused, and start spitting out spurious errors. When this happens, check on a real device to make sure it's not just a simulator issue. Usually quitting and restarting the simulator will fix it, but sometimes you may have to reboot your machine as well.</p>
<p><br/>
 </p>
<h3><a class="anchor" id="simulator_playback">
Playback Issues</a></h3>
<p>The simulator is notoriously finicky when it comes to audio playback. Any number of programs you've installed on your mac can cause the simulator to stop playing bg music, or effects, or both!</p>
<p>Some things to check when sound stops working:</p>
<ul>
<li>Try resetting and restarting the simulator.</li>
<li>Try restarting XCode, cleaning, and recompiling your project.</li>
<li>Try rebooting your computer.</li>
<li>Open "Audio MIDI Setup" (type "midi" into spotlight to find it) and make sure "Built-in Output" is set to 44100.0 Hz.</li>
<li>Go to System Preferences -&gt; Sound -&gt; Output, and ensure that "Play sound effects through" is set to "Internal Speakers"</li>
<li>Go to System Preferences -&gt; Sound -&gt; Input, and ensure that it is using internal sound devices.</li>
<li>Go to System Preferences -&gt; Sound -&gt; Sound Effects, and ensure "Play user interface sound
   effects" is checked.</li>
<li>Some codecs may cause problems with sound playback. Try removing them.</li>
<li>Programs that redirect audio can wreak havoc on the simulator. Try removing them.</li>
</ul>
<p><br/>
 </p>
<h3><a class="anchor" id="simulator_no_sound">
No OpenAL Sound in Simulator</a></h3>
<p><b>Note:</b> As of XCode 3.2.3, this problem doesn't seem to be surfacing anymore. The workaround code is now disabled by default. You can re-enable it by setting OBJECTAL_CFG_SIMULATOR_BUG_WORKAROUND to 1 in <a class="el" href="_object_a_l_config_8h_source.html">ObjectALConfig.h</a>.</p>
<p>There's a bug in the simulator that causes OpenAL-based sounds to stop playing in certain cases when using AVAudioPlayer (AudioTrack). ObjectAL contains code to work around this issue, but it's not a 100% fix.</p>
<p><br/>
 </p>
<h3><a class="anchor" id="simulator_freezing">
Simulator Freezups</a></h3>
<p><b>Note:</b> As of XCode 3.2.3, this problem doesn't seem to be surfacing anymore. The workaround code is now disabled by default. You can re-enable it by setting OBJECTAL_CFG_SIMULATOR_BUG_WORKAROUND to 1 in <a class="el" href="_object_a_l_config_8h_source.html">ObjectALConfig.h</a>.</p>
<p>There's a particularly nasty bug in the simulator's OpenAL and AVAudioPlayer implementation that causes the simulator to freeze for 60+ seconds in a very specific case:</p>
<p>If you use AudioTrack to play background music, then stop the music, then close the current OpenAL context, the simulator will freeze (a real device won't).</p>
<p>This is not really a huge problem, however, since you really should be making a sound manager singleton object (what <a class="el" href="interface_o_a_l_simple_audio.html" title="A simpler interface to the ObjectAL sound library.">OALSimpleAudio</a> is, basically) to handle the <a class="el" href="interface_a_l_device.html" title="A device is a logical mapping to an audio device through the OpenAL implementation...">ALDevice</a> and <a class="el" href="interface_a_l_context.html" title="A context encompasses a single listener and a series of sources.">ALContext</a> (which will in 99.9% of cases last for the entire duration of your program).</p>
<p>If you absolutely must close the current OpenAL context, start any AudioTrack objects playing at 0 volume first. </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Sat Oct 16 12:14:23 2010 for ObjectAL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
